<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <meta content="Pietruszewski Michał" name="author">
    <link href="main.css" rel="stylesheet" type="text/css">
    <link href="record.webp" rel="icon" type="image/x-icon">
    <title>Kamień i bułka</title>
</head>
<body class="theme-light font-secoundary">
<div class="container">
    <header>
        <nav>
            <ul class="list list-2">
                <li><a href="theory.html">Teoria muzyki</a></li>
                <li><a class="selected" href="blog.html">Blog o muzyce</a></li>
            </ul>
            <h2 class="mobile-title">
                <span>Kamień i bułka</span>
            </h2>
            <ul class="list list-1">
                <li><a href="index.html">Strona główna</a></li>
                <li><a href="contact.html">O mnie</a></li>
            </ul>
            <!--        mobile button for dropdown list-->
            <button aria-expanded="false" aria-label="Toggle mobile dropdown" class="mobile-button"
                    id="mobile-dropdown-button">
                <svg fill="black" height="18px" viewBox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 0h24v24H0z" fill="none"/>
                    <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/>
                </svg>
            </button>

        </nav>

        <ul class="mobile-dropdown-list" id="mobile-dropdown-list">
            <li><a href="theory.html">Teoria muzyki</a></li>
            <li><a class="selected" href="blog.html">Blog o muzyce</a></li>
            <li><a href="index.html">Strona główna</a></li>
            <li><a href="contact.html">O mnie</a></li>
        </ul>
    </header>
    <main>
        <h1 class="morph font-primary" id="main-tytul">
            <span>Kamień i bułka</span>
            <span>Rock and blog</span>
        </h1>
        <section class="main-article-container">

            <h3 class="full-width-text"> Witaj na blogu poświęconemu muzyce! </h3>
            <article>
                <h3>Najlepsi gitarzyści w histori rocka!</h3>
                <div>
                    <img alt="me" src="img.png">
                </div>
                <p> Od buntowniczych riffów Jimiego Hendrixa po melancholię Davida Gilmoura, czyli zestawienie
                    największych gitarzystów rockowych! Poznaj najbardziej wpływowych i najznakomistszych mistrzów
                    gitary rockowej rewolucji! Czy twój ulubiony artysta znalazł się na szczycie?"</p>
                <a href="blog-1.html">Przeczytaj więcej...</a>
            </article>
        </section>
        <svg id="filters">
            <defs>
                <filter id="threshold">
                    <feColorMatrix in="SourceGraphic" type="matrix" values="1 0 0 0 0
                  0 1 0 0 0
                  0 0 1 0 0
                  0 0 0 255 -140"/>
                </filter>
            </defs>
        </svg>
    </main>
    <footer>
        <p>&copy; Pietruszewski 2024 </p>
        <div>
            <p id="grampohone-aside-text">Naciśnij by posłuchać: -></p>
            <div class="gramophone">
                <img alt="Gramophone" src="record.webp">
                <audio autoplay loop src=" "></audio>
            </div>
        </div>
    </footer>
</div>
<script src="effects.js"></script>
<script>
    //set global color to light (delete class dark and add class light)
    function setTheme(theme)
    {
        document.body.classList.remove("theme-light", "theme-dark");
        document.body.classList.add(`theme-${theme}`);
    }

    //use morphing effect on h2
    const h2 = document.querySelector("#main-tytul");
    //for all p, h2, h3, h4, h5, h6 elements if they have class "morph" add morphing effect
    const morphElements = document.querySelectorAll("p, h1, h2, h3, h4, h5, h6");
    morphElements.forEach((element) =>
    {
        if (element.classList.contains("morph-manual"))
        {
            let m = new MorphingText(element, null, false);
            element.addEventListener("mouseenter", () =>
            {
                m.morphText();
                console.log("morph");
            });
            console.log("morph");
        }
        if (element.classList.contains("morph"))
            new MorphingText(element);

    });
    setTheme("light");

    document.getElementById('mobile-dropdown-button').addEventListener('click', () =>
    {
        const dropdownList = document.getElementById('mobile-dropdown-list');
        const isExpanded = dropdownList.classList.contains('expanded');
        const button = document.getElementById('mobile-dropdown-button');
        if (isExpanded)
        {
            dropdownList.classList.remove('expanded');
            dropdownList.classList.add('collapsed');
            button.setAttribute('aria-expanded', 'false');
            button.classList.remove('expanded');
            button.classList.add('collapsed');

        } else
        {
            dropdownList.classList.add('expanded');
            dropdownList.classList.remove('collapsed');
            button.classList.remove('collapsed');
            button.classList.add('expanded');
            button.setAttribute('aria-expanded', 'true');
        }
    });

    function shuffle(array)
    {
        for (let i = array.length - 1; i > 0; i--)
        {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    const gramophone = document.querySelector('.gramophone');
    const gramophoneAsideText = document.querySelector('#grampohone-aside-text');
    const audio = document.querySelector('audio');
    //songs are all song from songs folder
    songnames = [
        "01.Purple Haze.mp3",
        "02.Hey Joe.mp3",
        "03.Crosstown Traffic.mp3",
        "04.The Wind Cries Mary.mp3",
        "05.Fire.mp3",
        "06.Highway Chile.mp3",
        "07.Little Wing.mp3",
        "08.All Along the Watchtower.mp3",
        "09.Manic Depression.mp3",
        "10.Foxy Lady.mp3",
        "13.Castles Made of Sand.mp3",
        "19.Voodoo Child (Slight Return).mp3",
        "24.Rainy Day, Dream Away.mp3",
    ];
    songs = songnames.map(songname => `songs/${songname}`);
    shuffle(songs);
    let text = songs[0].toString();
    text = text.split('.').slice(1).join('.');
    text = text.split('.').slice(0);
    gramophoneAsideText.innerHTML = 'Naciśnij by posłuchać: <span>' + text[0] + '</span> ->';
    audio.pause();

    gramophone.addEventListener('click', () =>
    {
        gramophone.classList.toggle('rotating');
        let text = "";
        if (gramophone.classList.contains('rotating'))
        {
            audio.src = songs[0];
            audio.play();
            text = songs[0].toString();
            text = text.split('.').slice(1);
            gramophoneAsideText.innerHTML = 'Teraz odtwarzane: <span>' + text[0] + '</span> Naciśnij by zatrzymać ->';
        } else
        {
            audio.pause();
            shuffle(songs);
            text = songs[0].toString();
            text = text.split('.').slice(1).join('.');
            text = text.split('.').slice(0);
            gramophoneAsideText.innerHTML = 'Naciśnij by posłuchać: <span>' + text[0] + '</span> ->';
        }
    });

</script>
</body>
</html>
